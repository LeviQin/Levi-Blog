(function(m){"use strict";function o(t,e,s,i){if(s==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?i:s==="a"?i.call(t):i?i.value:e.get(t)}function c(t,e,s,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s}function A(t,e){e===void 0&&(e={});var s=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",s==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var H=`wc-waterfall {\r
  position: relative;\r
  display: block;\r
  box-sizing: content-box !important;\r
}\r
      \r
wc-waterfall > * {\r
  position: absolute;\r
  box-sizing: border-box;\r
}\r
`;A(H);function M(t){let e=0;for(let s=0;s<t.length;s++)e=t[e]<=t[s]?e:s;return e}function P(t,{getW:e,setW:s,getH:i,setH:r,getPad:j,setX:O,setY:k,getChildren:I},{cols:w,gap:p}){const[_,L,E,x]=j(t),u=I(t),T=u.length;if(T){const W=(e(t)-p*(w-1)-(x+L))/w;Array.prototype.forEach.call(u,n=>s(n,W));const z=Array.prototype.map.call(u,n=>i(n)),g=Array(w).fill(_);for(let n=0;n<T;n++){const C=u[n],y=M(g);k(C,g[y]),O(C,x+(W+p)*y),g[y]+=z[n]+p}r(t,Math.max(...g)-p+E)}else r(t,_+E)}var b,a,d,l,f,v;class h extends HTMLElement{constructor(){super(),b.add(this),Object.defineProperty(this,"_fl_w",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fl_h",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a.set(this,void 0),d.set(this,void 0),l.set(this,void 0),f.set(this,!1)}get gap(){return+(this.getAttribute("gap")||h.default_props.gap)}set gap(e){this.setAttribute("gap",e+"")}get cols(){return+(this.getAttribute("cols")||h.default_props.cols)}set cols(e){this.setAttribute("cols",e+"")}connectedCallback(){c(this,a,new ResizeObserver(e=>e.some(({target:s})=>s._fl_w!=s.offsetWidth||s._fl_h!=s.offsetHeight)&&this.relayout()),"f"),o(this,a,"f").observe(this),Array.prototype.forEach.call(this.children,e=>o(this,a,"f").observe(e)),this.relayout(),c(this,d,new MutationObserver(e=>{e.forEach(s=>{s.addedNodes.forEach(i=>i instanceof HTMLElement&&o(this,a,"f").observe(i)),s.removedNodes.forEach(i=>i instanceof HTMLElement&&o(this,a,"f").unobserve(i))}),this.relayout()}),"f"),o(this,d,"f").observe(this,{childList:!0,attributes:!1}),c(this,l,new MutationObserver(()=>this.relayout()),"f"),o(this,l,"f").observe(this,{childList:!1,attributes:!0})}disconnectedCallback(){o(this,a,"f").disconnect(),o(this,d,"f").disconnect(),o(this,l,"f").disconnect()}relayout(){o(this,f,"f")||(c(this,f,!0,"f"),requestAnimationFrame(()=>{o(this,b,"m",v).call(this),c(this,f,!1,"f")}))}}return a=new WeakMap,d=new WeakMap,l=new WeakMap,f=new WeakMap,b=new WeakSet,v=function(){P(this,{getW:t=>t.offsetWidth,setW:(t,e)=>t.style.width=e+"px",getH:t=>(t._fl_w=t.offsetWidth,t._fl_h=t.offsetHeight),setH:(t,e)=>t.style.height=e+"px",getPad:t=>{const e=getComputedStyle(t);return[parseInt(e.paddingTop),parseInt(e.paddingRight),-parseInt(e.paddingTop),parseInt(e.paddingLeft)]},setX:(t,e)=>t.style.left=e+"px",setY:(t,e)=>t.style.top=e+"px",getChildren:t=>t.children},{cols:this.cols,gap:this.gap}),this._fl_w=this.offsetWidth,this._fl_h=this.offsetHeight,o(this,l,"f").takeRecords()},Object.defineProperty(h,"default_props",{enumerable:!0,configurable:!0,writable:!0,value:Object.freeze({cols:2,gap:4})}),customElements.define("wc-waterfall",h),m.Waterfall=h,m})({});
